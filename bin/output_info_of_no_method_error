#!/usr/bin/env ruby

BASE_DIR = File.expand_path(File.dirname(__FILE__) + '/..')

command = "/usr/local/bin/gdb --batch -x #{BASE_DIR}/scripts/output_info_of_no_method_error.gdb #{ARGV.join(' ')} 2>&1"
IO.popen(command, 'r') do |io|
  while line = io.gets
    puts line
    if line[/^>>\[method_missing\] *0x[0-9a-f]+ *"(.*)"$/]
      puts $1
    end
  end
end
